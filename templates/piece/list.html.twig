{% extends 'base.html.twig' %}
{% block title %}Toutes les sous  categories
{% endblock %}
{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 1800px;
			width: 95%;
			font: 18px / 1.5 sans-serif;
		}
		.example-wrapper code {
			background: #F5F5F5;
			padding: 2px 6px;
		}
	</style>

	<div class="example-wrapper">
    {% for message in app.flashes('addedsubcategory') %}
			<div class="alert alert-dismissible alert-success mt-3">
				<strong>{{message}}</strong>
			</div>
		{% endfor %}
		{% for message in app.flashes('editedsubcategory') %}
			<div class="alert alert-dismissible alert-success mt-3">
				<strong>{{message}}</strong>
			</div>
		{% endfor %}
		{% for message in app.flashes('deletedsubcategory') %}
			<div class="alert alert-dismissible alert-danger mt-3">
				<strong>{{message}}</strong>
			</div>
		{% endfor %}


		<h1>Toutes les sous catégories</h1>
<a class="btn btn-success" href="{{ path('add_subcategory') }}">Ajouter une sous categorie</a>
		<table class="table table-hover mt-4">
			<thead>
				<tr>
					<th scope="col">ID SS/Catégorie</th>
          <th scope="col">Nom de la SS/catégorie</th>
					<th scope="col">Les Pieces</th>
					<th scope="col">Categorie</th>
				</tr>
			</thead>
			<tbody>
        {% for subcategory in subcategories %}
					<tr>
          <td>{{ subcategory.id }}</td>
						<td>
              <a type="button" class="btn btn-primary mb-3" href="{{ path('subcategory', {'id': subcategory.id}) }}">{{ subcategory.name }}</a>
						</td>
						<td>
              {% if pieces[subcategory.id] is not empty %}
                {% for piece in pieces[subcategory.id] %}
									<a type="button" class="btn btn-info mb-3" href="{{ path('piece', {'id': piece.id}) }}">{{ piece.name }}</a>
									{% if not loop.last %}{% endif %}
									{% if not loop.last %}{% endif %}
								{% endfor %}
							{% else %}
								<strong>Pas de Pieces</strong>
					    {% endif %}
						</td>
						<td>{{ category[subcategory.id] }}</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}

